# 게시글 목록 조회

## 구성파일
#### `pages/posts/ListPage.jsx`
- `/posts/list` URL에 매핑되는 페이지다.
- 주요 내용
  - 게시글 목록을 표현하는 `PostList.jsx` 컴포넌트를 포함한다.
  - 페이지네이션을 표현하는 `Pagination.jsx` 컴포넌트를 포함한다.
  - `useState()`로 게시글목록정보, 페이징정보, 현재 페이지번호를 관리한다.
  - `useEffect()`로 페이지번호가 변경될 때마다 게시글목록정보, 페이징정보, 현재 페이지번호를 갱신하다..
  - `PostList`컴포넌트에 게시글목록정보를 전달한다.
  - `Pagination` 컴포넌트에 페이징정보, 이벤트핸들러함수를 전달한다.
#### `components/posts/PostList.jsx`
- 게시글 목록정보를 표현하는 컴포넌트다.
- 주요 내용
  - `Props`로 `ListPage`가 전달한 게시글 목록정보를 받는다.
  - 배열객체의 `map()` 메소드를 이용해서 게시글 목록을 렌더링한다.
  - `<Link />`를 이용해서 게시글 제목을 클릭하면 게시글 상세페이지로 이동한다.
#### `components/Pagination.jsx`
- 페이지네이션을 표현하는 컴포넌트다.
- 주요 내용
  - `Props`로 'ListPage'가 전달한 페이징정보, 이벤트핸들러함수를 받는다.
  - 페이징정보를 이용해서 페이지네이션을 렌더링한다.
  - 페이지번호 클릭시 전달받은 이벤트핸들러함수를 실행한다.
#### `api/postApi.js`
- `axios`를 사용하여 백엔드 API와 통신한다.
- 주요 내용
  - 게시글 목록 요청 함수 제공

## 코드 구현하기
### 백엔드 API와 연동
1. `api/postApi.js` 페이지번호를 서버로 보내고 게시글 목록과 페이징정보를 응답으로 받기
   - 요청방식: `GET`
   - 요청URI: `/api/posts`
   - 요청파라미터: `?page=페이지번호`
   - 요청헤더: `Authorization:Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxIiwiYXV0aG9yaXRpZXMiOiJST0xFX1VTRVIiLCJpYXQiOjE3NTM5MjcyNjMsImV4cCI6MTc1MzkyODE2M30.u6uK9aM02ocDeYgMlb6T98Q0gMvs6bGwrexv0ebR18hFbXO_LzBEYfd1Yyk_HKs1d7mRwJ9jqraGDi0rc-7sog`
     - `api/axiosInstance.js`에서 HTTP 요청시 자동으로 요청헤더에 JWT 엑세스토큰을 추가한다.
   - 요청데이터: 없음
   - 응답데이터:
     ```json
     {
       "stateCode":200,
       "message":"요청이 성공적으로 처리되었습니다."
       "data":{
         "items": [
           {
             "postNo":5,
             "title":"게시글 작성 연습2",
             "commentCnt":"3",
             "createdDate":"2025-07-31T11:00:55.956912",
             "name":"홍길동"
           },
           {
             "postNo":4,
             "title":"게시글 작성 연습1",
             "commentCnt":"1",
             "createdDate":"2025-07-31T11:00:55.956912",
             "name":"홍길동"
           },
           
         ],
         "paging": {
           "page":1,
           "totalRows":12,
           "totalPage":2,
           "beginPage":1,
           "endPage":3,
           "prevPage":0,
           "nextPage":2,
           "first":true,
           "last":false
         }
       }    
     }
     ```
   - 주요 내용
     ```javascript
     export const fetchPosts = async (page = 1) => {
       const response = await axios.get(`${API_BASE}?page=${page}`);
       return response.data;
     }
     ```
### 게시글 목록 컴포넌트
1. `PostList` 컴포넌트 작성하기
    ```javascript
    const PostList = ({ posts }) => {
      // 코드 생략
    }
    export default PostList;
    // posts는 Props로 전달받은 게시글 목록 정보다.
    ```
2. 게시글 목록 렌더링하기
    ```jsx
    <tbody>
      {posts.length === 0 ? (
        <tr>
          <td colspan="5" className="text-center">게시글이 없습니다.</td>
        </tr>
      ) : (
        posts.map(post => (
          <tr key={post.postNo}>
            <td>{post.postNo}</td>
            <td><Link to={`/posts/detail/${post.postNo}`}>${post.title}</Link></td>
            <td>{post.name}</td>
            <td>{new Date(post.createdDate).toLocaleString()}</td>
            <td>{post.commentCnt}</td>
          </tr>
        ))
      )}
    </tbody>
    ```
### 페이지네이션 컴포넌트
1. `Pagination` 컴포넌트 작성하기
    ```javascript
    const Pagination = ({ paging, onPageChange }) => {
      // 코드 생략
    }
    export default Pagination;
    // paging과 onPageChange는 Props로 전달받은 페이징정보와 이벤트핸들러함수다.
    ```
2. 페이지번호 클릭시 실행되는 이벤트 핸들러 작성하기
    ```javascript
    const handleClick = (pageNo) => {
      // 클릭한 페이지번호와 현재 페이지번호가 다를 때만 부모 컴포넌트의 onPageChange()함수를 호출한다.
      if (pageNo !== paging.page) {
        onPageChange(pageNo);
      }
    }
    ```
3. 페이지네이션에 표시할 페이지번호 생성하기
    ```javascript
    // 페이지번호 렌더링에 활용되는 페이지번호를 시작페이지번호와 끝페이지번호를 활용해서 생성한다.
    const pageNumbers = [];
    for (let i = paging.beginPage; i<= paging.endPage; i++) {
      pageNumbers.push(i);
    }
    ```

