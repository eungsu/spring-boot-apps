# 게시글 등록

## 구성 파일
#### `pages/posts/FormPage.jsx`
- `/post/create` URL에 매핑되는 페이지다.
- 주요 내용
  - 게시글 등록폼을 표현하는 `PostForm.jsx` 컴포넌트를 포함한다. 
#### `components/posts/PostForm.jsx`
- 게시글등록폼을 표시하는 컴포넌트다.
- 주요 내용
  - 게시글 등록폼의 폼 입력값을 State로 관리한다.
  - 입력필드의 입력값이 변경될 때마다 State과 관리하는 폼 입력값을 갱신하는 이벤트핸들러 함수가 있다.
  - form에서 submit 이벤트가 발생하면 폼입력정보를 서버로 보내서 회원가입처리를 하는 이벤트핸들러 함수가 있다.
#### `api/posts.js`
- `axios`를 사용하여 백엔드 API와 통신한다.
- 주요 내용
  - 게시글 등록 요청 함수를 제공한다.

## 코드 구현하기
### 백엔드 API와 연동
1. `api/posts.js`에 게시글 등록 요청 구현하기
  - 요청방식: `POST`
  - 요청URI: `/api/posts`
  - 요청헤더: `Authorization:Bearer JWT_ACCESS_TOKEN`
  - 요청파라미터: 없음
  - 요청데이터:
    ```json
    {
      "title":"게시글 작성 연습",
      "content":"게시글 작성 연습입니다."
    }  
    ```
  - 응답데이터:
    ```json
      "statusCode": 200,
      "message": "게시글 등록이 완료되었습니다.",
      "data": null
    ```
  - 구현 코드:
    ```javascript
    export const createPost = async (postData) => {
      const response = await axios.post(`${API_BASE}`, postData);
      return response.data;
    }

    ```   
### 게시글 등록폼 컴포넌트
1. 'PostForm' 컴포넌트 작성하기
    ```jsx
    const PostForm = () => {
      // 코드 생략
    }
    export default PostForm;
    ```
2. `useState()`로 폼입력데이터 초기화하고 상태관리하기
    ```javascript
    const [formData, setFormData] = useState({
      title:'',
      content:''
    });
    ```
3. 입력폼 작성하기
    ```jsx
    return (
      <form>
        ...
        <input type="text" className="form-control" name="title"/>
        ...
        <textarea className="form-control" rows="7" name="content" ></textarea>
        ...
        <button type="submit" className="btn btn-primary">게시글등록</button>
      </form>
    )
    ```
4. 입력필드 값 변경시 실행되는 이벤트핸들러 작성하기
    ```javascript
    const handleChange = (e) => {
      const { name, value} = e.target;
      setFormData({...formData, [name]:value});
    }
    ```
5. 입력필드에 이벤트핸들러 바인딩하기
    ```jsx
    return (
      <form>
        ...
        <input type="text" className="form-control" name="title" onClick={handleChange} />
        ...
        <textarea className="form-control" rows="7" name="content" onClick={handleChange} ></textarea>
        ...
        <button type="submit" className="btn btn-primary">게시글등록</button>
      </form>
    )
    ```
6. `<form />`에서 `submit` 이벤트 발생시 실행되는 이벤트핸들러 작성하기
    ```javascript
    const handleSubmit = async (e) => {
      e.preventDefault();
      try {
        const response = await createPost(formData);
        alert(response.message);
        navigate('/posts/list');
      } catch (error) {
        alert('게시글 등록 실패: ' + error.response.data.message);
      }
    };
    ```
7. `<form />`태그에 이벤트핸들러 바인딩하기
    ```jsx
    return (
      <form onSubmit={handleSubmit}>
        // 게시글 입력폼
      </form>
    )
    ```
### 게시글 등록 페이지 작성하기
1. `FormPage` 작성하기
    ```javascript
    const FormPage = () => {
      // 코드 생략
    }
    export default FormPage;
    ```
2. `ContentLayout`와 `PostForm` 컴포넌트 포함하기
    ```jsx
    const FormPage = () => {
      return (
        <ContentLayout title="신규 게시글 등록">
          <PostForm />
        </ContentLayout>
      );
    }
    ```

