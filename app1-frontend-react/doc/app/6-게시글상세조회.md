# 게시글 상세 조회

## 구성파일
#### `pages/posts/DetailPage.jsx`
- `/posts/detail/:no` URL에 매핑되는 페이지다.
- 주요 내용
  - 게시글 상세정보를 표현하는 `PostDetail` 컴포넌트를 포함한다.
  - 댓글정보(댓글목록, 댓글입력폼)를 표현하는 `Comment` 컴포넌트를 포함한다.
  - URL 경로에서 게시글번호를 조회한다.
  - 게시글 상세정보, 댓글목록정보를 State로 관리한다.
  - 게시글 상세정보를 조회하는 함수가 있다.
  - 해당 게시글의 댓글목록을 조회하는 함수가 있다.
  - 게시글 삭제 버튼을 클릭했을 때 실행되는 이벤트 핸들러함수가 있다.
  - 댓글추가 버튼을 클릭했을 때 실행되는 이벤트 핸들러함수가 있다.
  - 댓글삭제 버튼을 클릭했을 때 실행되는 이벤트 핸들러함수가 있다.
  - `useEffect`로 게시글번호가 변경될 때 마다 게시글 상세정보와 댓글 목록정보를 백엔드 API에서 데이터를 가져오는 `사이드 이펙트함수`를 실행한다.
  - `PostDetail` 컴포넌트에 게시글상세정보와 게시글삭제 이벤트핸들러함수를 `Props`로 전달한다.
  - `Comment` 컴포넌트에 댓글목록과 댓글추가 이벤트핸들러함수, 댓글삭제 이벤트핸들러함수를 `Props`로 전달한다. 
#### `components/posts/PostDetail.jsx`
- 게시글 상세정보를 표현하는 컴포넌트다.
- 주요 내용
  - `Props`로 게시글 상세정보와 게시글삭제함수를 전달받는다.
  - 게시글 상세정보로 게시글 상세 화면을 렌더링한다.
  - "수정/삭제/목록으로" 버튼 혹은 링크를 제공한다.
#### `components/posts/Comment.jsx`
- 댓글 목록정보와 댓글 입력폼을 표현하는 컴포넌트다.
- 주요 내용
  - `State`로 댓글 입력폼의 내용을 관리한다.
  - 댓글 추가버튼을 클릭했을 실행되는 이벤트핸들러 함수가 있다.
  - `Props`로 전달받은 댓글 목록정보로 댓글목록화면을 렌더링한다.
  - 댓글 입력폼을 제공한다.
#### `api/posts.js`
- `axios`를 사용하여 백엔드 API와 통신한다.
- 주요 내용
  - 게시글 상세정보 요청 함수 제공
  - 게시글 삭제 요청 함수 제공
  - 댓글 목록 요청 함수 제공
  - 댓글 삭제 요청 함수 제공
  - 댓글 추가 요청 함수 제공

## 코드 구현하기
###  백엔드 API와 연동 - `api/posts.js`
1. 게시글 상세정보 조회하기
   - 요청방식: `GET`
   - 요청URI: `/api/posts/게시글번호`
   - 요청파라미터: 없음
   - 요청헤더: `Authorization:Bearer JWT_ACCESS_TOKEN`
   - 응답데이터:
     ```json
     {
       "statusCode":200,
       "message":"요청이 성공적으로 처리되었습니다.",
       "data": {
         "postNo": 1,
         "name": "홍길동",
         "title": "게시글 연습",
         "content": "게시글 연습 내용입니다.",
         "viewCnt": 0,
         "commentCnt": 0,
         "createdDate": "2025-08-06T12:07:54.211283",
         "updatedDate": "2025-08-06T12:07:54.211283"
       }
     }
     ```
   - 구현코드
     ```javascript
     // 게시글 상세정보를 조회하는 함수
     export const fetchPostDetail = async (postNo) => {
       const response = await axios.get(`${API_BASE}/${postNo}`);
       return response.data;
     }
     ```
2. 게시글 정보 삭제하기
   - 요청방식: `DELETE`
   - 요청URI: `/api/posts/게시글번호`
   - 요청파라미터: 없음
   - 요청데이터: 없음
   - 응답데이터:
     ```json
     {
       "statuscode": 200,
       "message": "게시글이 삭제처리 되었습니다.",
       "data": null
     }
     ```
   - 구현코드
     ```javascript
     // 게시글 정보를 삭제하는 함수
     export const deletePost = async (postNo) => {
       const response = await axios.delete(`${API_BASE}/${postNo}`);
       return response.data;
     }
     ```

3. 댓글목록 조회하기
   - 요청방식: `GET`
   - 요청URI: `/api/posts/게시글번호/comments`
   - 요청파라미터: 없음
   - 요청데이터: 없음
   - 응답데이터:
     ```json
     {
       "statusCode": 200,
       "message": "요청이 성공적으로 처리되었습니다.",
       "data": [
         {
           "commentNo": 1,
           "content": "첫번째 댓글 내용입니다.",
           "createdDate": "2025-08-06T12:07:54.213285",
           "name": "홍길동"
         }, 
         {
           "commentNo": 2,
           "content": "두번째 댓글 내용입니다.",
           "createdDate": "2025-08-06T12:07:54.213285",
           "name": "김유신"
         }, 
         {
           "commentNo": 4,
           "content": "세번째 댓글 내용입니다.",
           "createdDate": "2025-08-06T12:07:54.213285",
           "name": "홍길동"
         } 
       ]
     }
     ```
   - 구현코드
     ```javascript
     // 댓글목록 정보를 조회하는 함수
     export const fetchComments = async (postNo) => {
       const response = await axios.get(`${API_BASE}/${postNo}/comments`);
       return response.data;
     }
     ```
6. 신규 댓글 추가하기
   - 구현코드
     ```javascript
     // 신규 댓글을 추가하는 함수
     export const addComment = async (postNo, content) => {
       const response = await axios.post(`${API_BASE}/${postNo}/comments`, { content });
       return response.data;
     }
     ```
7. 댓글 삭제하기
   - 구현코드
     ```javascript
     // 댓글을 삭제하는 함수
     export const deleteComment = async (postNo, commentNo) => {
       const response = await axios.delete(`${API_BASE}/${postNo}/comments/${commentNo}`);
       return response.data;
     }
     ```

