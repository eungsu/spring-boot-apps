# 게시글 상세 조회

## 구성파일
#### `pages/posts/DetailPage.jsx`
- `/posts/detail/:no` URL에 매핑되는 페이지다.
- 주요 내용
  - 게시글 상세정보를 표현하는 `PostDetail` 컴포넌트를 포함한다.
  - 댓글정보(댓글목록, 댓글입력폼)를 표현하는 `Comment` 컴포넌트를 포함한다.
  - URL 경로에서 게시글번호를 조회한다.
  - 게시글 상세정보, 댓글목록정보를 State로 관리한다.
  - 게시글 상세정보를 조회하는 함수가 있다.
  - 해당 게시글의 댓글목록을 조회하는 함수가 있다.
  - 게시글 삭제 버튼을 클릭했을 때 실행되는 이벤트 핸들러함수가 있다.
  - 댓글추가 버튼을 클릭했을 때 실행되는 이벤트 핸들러함수가 있다.
  - 댓글삭제 버튼을 클릭했을 때 실행되는 이벤트 핸들러함수가 있다.
  - `useEffect`로 게시글번호가 변경될 때 마다 게시글 상세정보와 댓글 목록정보를 백엔드 API에서 데이터를 가져오는 `사이드 이펙트함수`를 실행한다.
  - `PostDetail` 컴포넌트에 게시글상세정보와 게시글삭제 이벤트핸들러함수를 `Props`로 전달한다.
  - `Comment` 컴포넌트에 댓글목록과 댓글추가 이벤트핸들러함수, 댓글삭제 이벤트핸들러함수를 `Props`로 전달한다. 
#### `components/posts/PostDetail.jsx`
- 게시글 상세정보를 표현하는 컴포넌트다.
- 주요 내용
  - `Props`로 게시글 상세정보와 게시글삭제함수를 전달받는다.
  - 게시글 상세정보로 게시글 상세 화면을 렌더링한다.
  - "수정/삭제/목록으로" 버튼 혹은 링크를 제공한다.
#### `components/posts/Comment.jsx`
- 댓글 목록정보와 댓글 입력폼을 표현하는 컴포넌트다.
- 주요 내용
  - `State`로 댓글 입력폼의 내용을 관리한다.
  - 댓글 추가버튼을 클릭했을 실행되는 이벤트핸들러 함수가 있다.
  - `Props`로 전달받은 댓글 목록정보로 댓글목록화면을 렌더링한다.
  - 댓글 입력폼을 제공한다.
#### `api/posts.js`
- `axios`를 사용하여 백엔드 API와 통신한다.
- 주요 내용
  - 게시글 상세정보 요청 함수 제공
  - 게시글 삭제 요청 함수 제공
  - 댓글 목록 요청 함수 제공
  - 댓글 삭제 요청 함수 제공
  - 댓글 추가 요청 함수 제공

## 코드 구현하기
###  백엔드 API와 연동
1. `api/posts.js`
    ```javascript
    const API_BASE = 'http://localhost:8080/api/posts';

    // 게시글 상세정보를 조회하는 함수
    export const fetchPostDetail = async (postNo) => {
      const response = await axios.get(`${API_BASE}/${postNo}`);
      return response.data;
    }

    // 게시글 정보를 삭제하는 함수
    export const deletePost = async (postNo) => {
      const response = await axios.delete(`${API_BASE}/${postNo}`);
      return response.data;
    }

    // 댓글목록 정보를 조회하는 함수
    export const fetchComments = async (postNo) => {
      const response = await axios.get(`${API_BASE}/${postNo}/comments`);
      return response.data;
    }

    // 신규 댓글을 추가하는 함수
    export const addComment = async (postNo, content) => {
      const response = await axios.post(`${API_BASE}/${postNo}/comments`, { content });
      return response.data;
    }

    // 댓글을 삭제하는 함수
    export const deleteComment = async (postNo, commentNo) => {
      const response = await axios.delete(`${API_BASE}/${postNo}/comments/${commentNo}`);
      return response.data;
    }
    ```
